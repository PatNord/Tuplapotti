import random
import time

def main():

    print("Tervetuloa pelaamaan Tuplapottia!\n Ohje: Peli√§ pelataan sy√∂tt√§m√§ll√§ numeroita terminaaliin.\n Aloita sy√∂tt√§m√§ll√§ rahaa.")
    time.sleep(1.5)
    pelaajan_saldo = 0
    panos = 0.20
    

    while True:
        

        valinta = input("| 1. Pelaa | 2. Aseta panos | 3. Lis√§√§ rahaa | 4. Voitonmaksu | 5. Voittotaulu | 6. Pelivaraukset | 7. Panos |\n> ")

        if valinta not in ["1", "2", "3", "4", "5", "6", "7"]:
            print("virheellinen sy√∂te")

        if valinta == "1" and pelaajan_saldo == 0:
            print("Pelivaraukset eiv√§t riit√§. sy√∂t√§ rahaa jatkaaksesi tai paina voitonmaksu lopettaaksesi.")
                
        
        

        if valinta == "1" and pelaajan_saldo >= 0.20:
            pelaajan_saldo -= panos
            tulos = pelaa(pelaajan_saldo, panos)
            pelaajan_saldo += tulos
            print()
            if pelaajan_saldo < panos:
                panos = tarkista_panos(pelaajan_saldo)
    
            
            
        
        elif valinta == "2":
            panos = aseta_panos(pelaajan_saldo)
        
        elif valinta == "3":
            pelaajan_saldo += sy√∂t√§_rahaa()
        
        elif valinta == "4":
            print(f"Voitonmaksu {pelaajan_saldo:.2f}‚Ç¨")
            break

        elif valinta == "5":
            n√§yt√§_voitonjakotaulu(panos)
        
        elif valinta == "6":
            print("**********************")
            print(f"{pelaajan_saldo:.2f}‚Ç¨")
            print("**********************")
        
        elif valinta == "7":
            if pelaajan_saldo < 0.20:
                print("Pelivaraukset eiv√§t riit√§ pelaamiseen")
            else:
                print(f"Panos: {panos:.2f}‚Ç¨")
        
        
        
        





def n√§yt√§_voitonjakotaulu(panos):
    kertoja = panos
    print("=========================================")
    print(f"ü™ôü™ôü™ô   {10.00 * kertoja:.2f}‚Ç¨  " f"üçÜüçÜüçÜ {2.00 * kertoja:.2f}‚Ç¨  " f"üçäüçä‚≠ê {1.60 * kertoja:.2f}‚Ç¨  ")
    print(f"üçÄüçÄüçÄ {4.00 * kertoja:.2f}‚Ç¨  " f"üçêüçê‚≠ê {2.00 * kertoja:.2f}‚Ç¨  " f"üçíüçíüçí {1.60 * kertoja:.2f}‚Ç¨  ")
    print(f"üçÄüçÄ‚≠ê {3.00 * kertoja:.2f}‚Ç¨  " f"üçâüçâ‚≠ê {2.00 * kertoja:.2f}‚Ç¨  " f"üçíüçíüçì {1.60 * kertoja:.2f}‚Ç¨  ")
    print(f"üçêüçêüçê {3.00* kertoja:.2f}‚Ç¨  " f"üçÜüçÜ‚≠ê {2.00 * kertoja:.2f}‚Ç¨  " f"üçíüçí - {0.80 * kertoja:.2f}‚Ç¨  ")
    print(f"üçâüçâüçâ {3.00 * kertoja:.2f}‚Ç¨  " f"üçáüçá‚≠ê {2.00 * kertoja:.2f}‚Ç¨  " f" - -üçì {0.80 * kertoja:.2f}‚Ç¨  ")
    print(f"üçáüçáüçá {3.00 * kertoja:.2f}‚Ç¨  " f"üçäüçäüçä {1.60 * kertoja:.2f}‚Ç¨  " f"üçí - - {0.40 * kertoja:.2f}‚Ç¨")
    print("=========================================")



#PELIN KULKU

def sy√∂t√§_rahaa():
    print("******************")
    print("0.20‚Ç¨ 0.50‚Ç¨ 1‚Ç¨ 2‚Ç¨")
    print("******************")
    sy√∂tetyt_rahat = 0
    while True:
        m√§√§r√§ = (input("| 1. 0.20‚Ç¨ | 2. 0.50‚Ç¨ | 3. 1‚Ç¨ | 4. 2‚Ç¨ | 0. Aloitusvalikko |\n> "))

        if m√§√§r√§ not in["0", "1", "2", "3", "4"]:
            print("Virheellinen sy√∂te")
        
        elif m√§√§r√§ == "1":
            sy√∂tetyt_rahat += 0.20
            print(f"{sy√∂tetyt_rahat:.2f}‚Ç¨")
        elif m√§√§r√§ == "2":
            sy√∂tetyt_rahat += 0.50
            print(f"{sy√∂tetyt_rahat:.2f}‚Ç¨")
        elif m√§√§r√§ == "3":
            sy√∂tetyt_rahat += 1
            print(f"{sy√∂tetyt_rahat:.2f}‚Ç¨")
        elif m√§√§r√§ == "4":
            sy√∂tetyt_rahat += 2
            print(f"{sy√∂tetyt_rahat:.2f}‚Ç¨")
        elif m√§√§r√§ == "0":
            break
        
    print()
    print("************************")        
    print(f"Pelimerkkej√§ lis√§tty: {sy√∂tetyt_rahat:.2f}‚Ç¨")
    print("************************")   
    print()
    return sy√∂tetyt_rahat

def aseta_panos(rahat):
    pelaajan_saldo = rahat
    panostaulu = [0.20, 0.40, 0.60, 0.80, 1]
    korotus = 0
    pelaajan_panos = 0.2
    print("Kirjoita sy√∂tteeseen '1' korottaaksesi panosta tai '2' siirry takaisin aloitusvalikkoon.")
    print()
    

    while True:
        panos = input(("| 1. Panos | 2. Aloitusvalikko |\n> ")).strip()
        if panos == "1":
            korotus += 1
            if korotus > 4 or pelaajan_saldo < panostaulu[korotus]:
                korotus = 0
            pelaajan_panos = panostaulu[korotus]
            print(f"Panos {pelaajan_panos:.2f}‚Ç¨")
        elif panos == "2":
            return pelaajan_panos

def py√∂r√§ytys():
    index_0_ja_1_merkit = ["üçí", "üçä", "üçá", "üçÜ", "üçâ", "üçê", "üçÄ", "ü™ô "]
    kaikki_pelimerkit = ["üçí", "üçì", "üçä", "üçá", "üçÜ", "üçâ", "üçê", "üçÄ", "‚≠ê", "ü™ô "]

    rivi1 = []
    rivi2 = []
    rivi3 = []
    
    i = 0
    while i < 2:
        hedelm√§ = random.choice(index_0_ja_1_merkit)
        rivi1.append(hedelm√§)
        i += 1
        if i == 2:
            rivi1.append(random.choice(kaikki_pelimerkit))
            i = 0
            break
    
    while i < 2:
        hedelm√§ = random.choice(index_0_ja_1_merkit)
        rivi2.append(hedelm√§)
        i += 1
        if i == 2:
            rivi2.append(random.choice(kaikki_pelimerkit))
            i = 0
            break
    
    while i < 2:
        hedelm√§ = random.choice(index_0_ja_1_merkit)
        rivi3.append(hedelm√§)
        i += 1
        if i == 2:
            rivi3.append(random.choice(kaikki_pelimerkit))
            i = 0
            break

    rivi4 = [rivi1[0], rivi2[1], rivi3[2]]
    rivi5 = [rivi3[0], rivi2[1], rivi1[2]]

    return rivi1, rivi2, rivi3, rivi4, rivi5

def print_py√∂r√§ytys(py√∂r√§ytys):
    print("Arvonta k√§ynniss√§...")
    print()
    time.sleep(1.5)
    for list in py√∂r√§ytys[:3]:
        print(" ".join(list))




def tuplaus(voitto):
    vaihtoehdot = [0, 1, 2, 3]  # 0 h√§vi√§√§, 1 kruuna, 2 klaava, 3 rahat takaisin eli 1/2
    voitonjako = False  #Tarkastetaan, onko pelaaja voittanut v√§hint√§√§n yhden tuplauksen.
    
    while True:
        try:
            #katsotaan onko voitonjako True. Jos on, niin input voitonmaksulla printataan. 
            # Jos ei, niin vain tuplausvaihtoehdot n√§kyv√§t. Try - except lis√§tty nappaamaan mahdolliset virheet.
            if voitonjako:
                    
                    pelaajanvalinta = int(input("| 1. Kruuna | 2. Klaava | 3. Lopeta |\n> "))
            else:
                    pelaajanvalinta = int(input("| 1. Kruuna | 2. Klaava |\n> "))

        except ValueError:
            print("Virheellinen sy√∂te. Valitse 1, 2 tai 3.")
            continue
        
        #katsotaan aluksi voitonjaot. Jos pelaaja valitsee voitonjaon ja voitonjako == True, h√§nelle palautetaan voitot.
        if pelaajanvalinta == 3 and voitonjako:
            #voitonjako == true, jolloin voitot voidaan nostaa
            print(f"Voitonmaksu: {voitto:.2f}‚Ç¨")
            return voitto
        #Jos voitonjako == False, niin ohjelma jatkaa py√∂rimist√§.
        elif pelaajanvalinta == 3 and not voitonjako:
            #voitonjako == False, voittoja ei voida nostaa.
            print("Tuplaus pit√§√§ suorittaa ennen voitonmaksua")
            continue
        
        elif pelaajanvalinta not in [1, 2]:
            #napataan virheellinen sy√∂te.
            print("Virheellinen sy√∂te. Valitse 1 tai 2.")
            continue
        
        #arvotaan koneen tulos ja suoritetaan itse tuplaus
        tietokoneen_valinta = random.choice(vaihtoehdot)
        
        if pelaajanvalinta == 1 and tietokoneen_valinta == 1:
            print("Pelaaja valitsi kruunan.")
            print("Arvonta k√§ynniss√§...")
            time.sleep(2)
            print("Kone arpoi kruunan.")
            voitto *= 2
            print(f"Voitit {voitto:.2f}‚Ç¨")
            voitonjako = True  #vaihdetaan voitonjako == True. Seuraavalla kierroksella voi nostaa voitot

        elif pelaajanvalinta == 2 and tietokoneen_valinta == 2:
            print("Pelaaja valitsi klaavan.")
            print("Arvonta k√§ynniss√§...")
            time.sleep(2)
            print("Kone arpoi klaavan.")
            voitto *= 2
            print(f"Voitit {voitto:.2f}‚Ç¨")
            voitonjako = True #Sama kuin edellisess√§.
        
        elif tietokoneen_valinta == 3:
            print("Arvonta k√§ynniss√§...")
            time.sleep(2)
            print(f"Kone arpoi 1/2. Palautus {voitto:.2f}‚Ç¨.")
            return voitto, False
        
        else:
            print("Arvonta k√§ynniss√§...")
            time.sleep(2)
            print("Tyhj√§! H√§visit tuplauksen.")
            return 0

def voitonjako(panos, py√∂r√§ytys):
    
    rivi1, rivi2, rivi3, rivi4, rivi5 = py√∂r√§ytys
    voitto = 0

    if rivi1[0] == rivi1[1] == rivi1[2]:
        if rivi1[0] == "ü™ô":
            voitto += 10.00 * panos
        elif rivi1[0] == "üçÄ":
            voitto += 4.00 * panos
        elif rivi1[0] == "üçê" or rivi1[0] == "üçâ" or rivi1[0] == "üçá":
            voitto += 3.00 * panos
        elif rivi1[0] == "üçÜ":
            voitto += 2.00 * panos
        elif rivi1[0] == "üçä" or rivi1[0] == "üçí":
            voitto += 1.60 * panos
    
    elif rivi1[0] == rivi1[1] and rivi1[2] == "‚≠ê":
        if rivi1[0] == "üçÄ":
            voitto += 3.00 * panos
        elif rivi1[0] == "üçê" or rivi1[0] == "üçâ" or rivi1[0] == "üçÜ" or rivi1[0] == "üçá":
            voitto += 2.00 * panos
        elif rivi1[0] == "üçä":
            voitto += 1.60 * panos
    
    elif rivi1[0] == rivi1[1] and rivi1[2] == "üçì":
        if rivi1[0] == "üçí":
            voitto += 1.60 * panos
    elif rivi1[0] == rivi1[1] != rivi1[2]:
        if rivi1[0] == "üçí":
            voitto += 0.80 * panos
    elif rivi1[0] == "üçí" and rivi1[1] != "üçí" and rivi1[2] != "üçí":
        voitto += 0.40 * panos
    
    elif rivi1[0] != "üçí" and rivi1[2] == "üçì":
        voitto += 0.80 * panos

    #===============RIVI 2 =================================

    if rivi2[0] == rivi2[1] == rivi2[2]:
        if rivi2[0] == "ü™ô":
            voitto += 10.00 * panos
        elif rivi2[0] == "üçÄ":
            voitto += 4.00 * panos
        elif rivi2[0] == "üçê" or rivi2[0] == "üçâ" or rivi2[0] == "üçá":
            voitto += 3.00 * panos
        elif rivi2[0] == "üçÜ":
            voitto += 2.00 * panos
        elif rivi2[0] == "üçä" or rivi2[0] == "üçí":
            voitto += 1.60 * panos

    elif rivi2[0] == rivi2[1] and rivi2[2] == "‚≠ê":
        if rivi2[0] == "üçÄ":
            voitto += 3.00 * panos
        elif rivi2[0] == "üçê" or rivi2[0] == "üçâ" or rivi2[0] == "üçÜ" or rivi2[0] == "üçá":
            voitto += 2.00 * panos
        elif rivi2[0] == "üçä":
            voitto += 1.60 * panos

    elif rivi2[0] == rivi2[1] and rivi2[2] == "üçì":
        if rivi2[0] == "üçí":
            voitto += 1.60 * panos
    elif rivi2[0] == rivi2[1] != rivi2[2]:
        if rivi2[0] == "üçí":
            voitto += 0.80 * panos
    elif rivi2[0] == "üçí" and rivi2[1] != "üçí" and rivi2[2] != "üçí":
        voitto += 0.40 * panos

    elif rivi2[0] != "üçí" and rivi2[2] == "üçì":
        voitto += 0.80 * panos

#===================RIVI3============================

    if rivi3[0] == rivi3[1] == rivi3[2]:
        if rivi3[0] == "ü™ô":
            voitto += 10.00 * panos
        elif rivi3[0] == "üçÄ":
            voitto += 4.00 * panos
        elif rivi3[0] == "üçê" or rivi3[0] == "üçâ" or rivi3[0] == "üçá":
            voitto += 3.00 * panos
        elif rivi3[0] == "üçÜ":
            voitto += 2.00 * panos
        elif rivi3[0] == "üçä" or rivi3[0] == "üçí":
            voitto += 1.60 * panos

    elif rivi3[0] == rivi3[1] and rivi3[2] == "‚≠ê":
        if rivi3[0] == "üçÄ":
            voitto += 3.00 * panos
        elif rivi3[0] == "üçê" or rivi3[0] == "üçâ" or rivi3[0] == "üçÜ" or rivi3[0] == "üçá":
            voitto += 2.00 * panos
        elif rivi3[0] == "üçä":
            voitto += 1.60 * panos

    elif rivi3[0] == rivi3[1] and rivi3[2] == "üçì":
        if rivi3[0] == "üçí":
            voitto += 1.60 * panos
    elif rivi3[0] == rivi3[1] != rivi3[2]:
        if rivi3[0] == "üçí":
            voitto += 0.80 * panos
    elif rivi3[0] == "üçí" and rivi3[1] != "üçí" and rivi3[2] != "üçí":
        voitto += 0.40 * panos

    elif rivi3[0] != "üçí" and rivi3[2] == "üçì":
        voitto += 0.80 * panos

#====================RIVI4 =================================
    if rivi4[0] == rivi4[1] == rivi4[2]:
        if rivi4[0] == "ü™ô":
            voitto += 10.00 * panos
        elif rivi4[0] == "üçÄ":
            voitto += 4.00 * panos
        elif rivi4[0] == "üçê" or rivi4[0] == "üçâ" or rivi4[0] == "üçá":
            voitto += 3.00 * panos
        elif rivi4[0] == "üçÜ":
            voitto += 2.00 * panos
        elif rivi4[0] == "üçä" or rivi4[0] == "üçí":
            voitto += 1.60 * panos

    elif rivi4[0] == rivi4[1] and rivi4[2] == "‚≠ê":
        if rivi4[0] == "üçÄ":
            voitto += 3.00 * panos
        elif rivi4[0] == "üçê" or rivi4[0] == "üçâ" or rivi4[0] == "üçÜ" or rivi4[0] == "üçá":
            voitto += 2.00 * panos
        elif rivi4[0] == "üçä":
            voitto += 1.60 * panos

    elif rivi4[0] == rivi4[1] and rivi4[2] == "üçì":
        if rivi4[0] == "üçí":
            voitto += 1.60 * panos
    elif rivi4[0] == rivi4[1] != rivi4[2]:
        if rivi4[0] == "üçí":
            voitto += 0.80 * panos
    elif rivi4[0] == "üçí" and rivi4[1] != "üçí" and rivi4[2] != "üçí":
        voitto += 0.40 * panos

    elif rivi4[0] != "üçí" and rivi4[2] == "üçì":
        voitto += 0.80 * panos
    
    #===================RIVI5==============================

    if rivi5[0] == rivi5[1] == rivi5[2]:
        if rivi5[0] == "ü™ô":
            voitto += 10.00 * panos
        elif rivi5[0] == "üçÄ":
            voitto += 4.00 * panos
        elif rivi5[0] == "üçê" or rivi5[0] == "üçâ" or rivi5[0] == "üçá":
            voitto += 3.00 * panos
        elif rivi5[0] == "üçÜ":
            voitto += 2.00 * panos
        elif rivi5[0] == "üçä" or rivi5[0] == "üçí":
            voitto += 1.60 * panos

    elif rivi5[0] == rivi5[1] and rivi5[2] == "‚≠ê":
        if rivi5[0] == "üçÄ":
            voitto += 3.00 * panos
        elif rivi5[0] == "üçê" or rivi5[0] == "üçâ" or rivi5[0] == "üçÜ" or rivi5[0] == "üçá":
            voitto += 2.00 * panos
        elif rivi5[0] == "üçä":
            voitto += 1.60 * panos

    elif rivi5[0] == rivi5[1] and rivi5[2] == "üçì":
        if rivi5[0] == "üçí":
            voitto += 1.60 * panos
    elif rivi5[0] == rivi5[1] != rivi5[2]:
        if rivi5[0] == "üçí":
            voitto += 0.80 * panos
    elif rivi5[0] == "üçí" and rivi5[1] != "üçí" and rivi5[2] != "üçí":
        voitto += 0.40 * panos

    elif rivi5[0] != "üçí" and rivi5[2] == "üçì":
        voitto += 0.80 * panos
    
    if voitto == 0:
        return 0
    else:
        return voitto

def pelaa(pelaajan_saldo, panos):
    print("************************")        
    print(f"Pelivaraukset: {pelaajan_saldo:.2f}‚Ç¨")
    print("************************")  
    p = py√∂r√§ytys()
    print_py√∂r√§ytys(p)
    lopputulos = voitonjako(panos, p)
    if lopputulos == 0:
        print()
        print("Ei voittoa.")
        return 0
    else:
        print()
        print(f"Voitit {lopputulos:.2f}‚Ç¨")
        while True:
            valinta = input("| 1. Tuplaa | 2. Voitonmaksu |\n> ")
            if valinta not in ["1", "2"]:
                print("virheellinen sy√∂te")
            elif valinta == "1":
                tuplattu = tuplaus(lopputulos)
                if tuplattu == 0:
                    return 0
                elif tuplattu[1] == False:
                    break
                    
            elif valinta == "2":
                print(f"Voitit {lopputulos:.2f}‚Ç¨")
                return lopputulos
    return lopputulos


def tarkista_panos(pelaajan_saldo):
    if pelaajan_saldo > 0.80 and pelaajan_saldo < 1:
        return 0.80
    elif pelaajan_saldo > 0.60 and pelaajan_saldo < 0.80:
        return 0.60
    elif pelaajan_saldo > 0.40 and pelaajan_saldo < 0.60:
        return 0.40
    elif pelaajan_saldo > 0.20 and pelaajan_saldo < 0.40:
        return 0.20
    elif pelaajan_saldo < 0.20:
        print("Pelivaraukset eiv√§t riit√§. sy√∂t√§ rahaa jatkaaksesi tai paina voitonmaksu lopettaaksesi.")

if __name__=="__main__":
    main()